<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Agenda</title>
    <script>
        var contatos = [];

        function inicio() {
            var escolha = parseInt(prompt("AGENDA\n1) Cadastro\n2) Pesquisar\n3) Classificar\n4) Listar\n5) Sair"));

            switch(escolha) {
                case 1: cadastro(); break;
                case 2: pesquisar(); break;
                case 3: classificar(); break;
                case 4: listar(); break;
                case 5: sair(); break;
                default:  alert("Opção inválida");
            }
            inicio();
        }

        function pesquisar() {
            if(contatos.length == 0) {
                alert("SEM CONTATOS CADASTRADOS");
                inicio();
            } 

            var opcao = parseInt(prompt("Escollha sua opção:\n1) Pesquisar por nome\n2) Pesquisar por telefone \n3) Voltar"));

            switch(opcao) {
                case 1: 
                    var nome = prompt("Digite o nome a ser pesquisado: ");
                    if(contatos.some(contato => contato.nome == nome)) {
                        var contato = contatos.find(contato => contato.nome == nome);
                        alert("CONTATO ENCONTRADO\n Nome: " + contato.nome + "\nTelefone: " + contato.telefone);
                    }
                    break;
                case 2:
                    var telefone = prompt("Digite o telefone a ser pesquisado: ");
                    if(contatos.some(contato => contato.telefone == telefone)) {
                        var contato = contatos.find(contato => contato.telefone == telefone);
                        alert("CONTATO ENCONTRADO\n Nome: " + contato.nome + "\nTelefone: " + contato.telefone + "\nEndereço:  " + contato.endereco);

                    }
                    break;
                case 3: 
                    inicio();
                    break;
                default:  alert("Opção inválida");
            }
            inicio();
        }

        function cadastro() {
            var numCadastros = parseInt(prompt("Insira a quantidade de cadastros:")); 
            if(numCadastros <= 0 || isNaN(numCadastros)) {
                alert("ERRO: Integer incorreto, tente novamente.");
                cadastro();
            }

            for(let i = 0; i < numCadastros; i++) {
                var nome  = prompt("Digite o nome: ");
                var endereco =  prompt("Digite o endereço: ");
                var telefone  = prompt("Digite o telefone: ");

                if(nome && endereco && telefone) {
                    var contato = {nome:nome,endereco:endereco,telefone:telefone};
                    contatos.push(contato);
                } else {
                    alert("ERRO: String incorreto, tente novamente.");
                    i--;
                }
            }
            inicio();
        }

        function classificar() {
            if(contatos.length == 0) {
                alert("SEM CONTATOS CADASTRADOS");
                inicio();
            } 

            contatos.sort((a, b) => a.nome.localeCompare(b.nome));
            alert("LISTA DE CONTATOS REORGANIZADA");
            var mensaegem = 'LISTA CONTATOS:\n'
            for(let i = 0; i < contatos.length; i++) {
                mensaegem +=  (i+1) + ") Nome: " + contatos[i].nome + " | Telefone:  " + contatos[i].telefone + "| Endereco:  " + contatos[i].endereco + "\n";

            }
            alert(mensaegem);

            inicio();
        }

        function listar() {
            if(contatos.length == 0) {
                alert("SEM CONTATOS CADASTRADOS");
                inicio();
            } 

            var mensaegem = 'LISTA CONTATOS:\n'
            for(let i = 0; i < contatos.length; i++) {
                mensaegem +=  (i+1) + ") Nome: " + contatos[i].nome + "| Telefone:  " + contatos[i].telefone + "| Endereco:  " + contatos[i].endereco + "\n";
            }
            alert(mensaegem);

            inicio();
        }

        function sair() {
            var sair = confirm ("Deseja sair da agenda?");
            if(sair) {
                alert("Obrigado por usar a agenda!");
            }
        }

        inicio()
    </script>
</head>
<body>
    
</body>
</html>